================================================================================
   SISTEMA DE TICKETS WHATSAPP CON IA - SETUP DOCKER
================================================================================

ARCHIVOS ACTUALIZADOS/CREADOS:
================================================================================

1. ‚úÖ Dockerfile (ACTUALIZADO)
   - Agregadas: carpeta logs_conversaciones, curl para health checks
   - Variables de entorno para DeepSeek

2. ‚úÖ docker-compose.yml (CREADO)
   - Configuraci√≥n completa para Docker Compose
   - Vol√∫menes para persistencia
   - Health checks autom√°ticos

3. ‚úÖ docker-compose.example.yml (CREADO)
   - Ejemplo comentado para f√°cil configuraci√≥n

4. ‚úÖ .dockerignore (CREADO)
   - Archivos a ignorar en el build de Docker

5. ‚úÖ DOCKER.md (CREADO)
   - Documentaci√≥n detallada de Docker

6. ‚úÖ DEPLOYMENT.md (CREADO)
   - Gu√≠a r√°pida de despliegue

7. ‚úÖ start-docker.bat (CREADO)
   - Script de inicio para Windows

8. ‚úÖ stop-docker.bat (CREADO)
   - Script de parada para Windows

9. ‚úÖ start-docker.sh (CREADO)
   - Script de inicio para Linux/Mac

10. ‚úÖ stop-docker.sh (CREADO)
    - Script de parada para Linux/Mac

11. ‚úÖ main.py (ACTUALIZADO)
    - Sistema completo de conversaciones
    - Integraci√≥n con DeepSeek
    - Gesti√≥n de sesiones

12. ‚úÖ requirements.txt (CREADO)
    - Todas las dependencias Python necesarias

13. ‚úÖ .env (ACTUALIZADO)
    - Configuraci√≥n de DeepSeek

14. ‚úÖ index.html (ACTUALIZADO)
    - Dashboard mejorado con nuevas funcionalidades

================================================================================
PASOS PARA DESPLEGAR EN DOCKER:
================================================================================

PASO 1: INSTALAR DOCKER
   - Windows: https://www.docker.com/products/docker-desktop/
   - Linux: sudo apt install docker.io docker-compose
   - Mac: https://www.docker.com/products/docker-desktop/

PASO 2: OBTENER API KEY DE DEEPSEEK
   - Ir a: https://platform.deepseek.com
   - Crear cuenta y obtener API Key
   - Guardar: sk-xxxxxxxxxxxxx

PASO 3: CONFIGURAR docker-compose.yml
   Edita el archivo y busca:
   DEEPSEEK_API_KEY: "${DEEPSEEK_API_KEY}"
   
   Reemplaza con tu API Key real o en l√≠nea de comandos:
   export DEEPSEEK_API_KEY="sk-tu-api-key"

   Verifica tambi√©n:
   - IP_LAPTOP (IP de la m√°quina del puente)
   - PUERTO_LAPTOP (normalmente 9000)
   - API_TOKEN (debe coincidir con whatsapp-bridge.js)

PASO 4: CONSTRUIR E INICIAR
   
   Windows:
   - Doble click en: start-docker.bat
   
   O manualmente:
   docker-compose up -d
   
   Linux/Mac:
   ./start-docker.sh
   
   O:
   docker-compose up -d

PASO 5: VERIFICAR QUE FUNCIONA
   
   Ver estado del contenedor:
   docker-compose ps
   
   Ver logs:
   docker-compose logs -f
   
   Health check:
   curl http://localhost:8523/health
   
   Acceder al dashboard:
   http://localhost:8523/

PASO 6: ENVIAR PRIMER MENSAJE POR WHATSAPP
   - El usuario completa la conversaci√≥n
   - Se crea el ticket autom√°ticamente
   - Aparece en el dashboard

================================================================================
VARIABLES DE ENTORNO PRINCIPALES:
================================================================================

DEEPSEEK_API_KEY          Tu API Key de DeepSeek (REQUERIDO)
IP_LAPTOP                 IP de la m√°quina con whatsapp-bridge.js
PUERTO_LAPTOP             Puerto del puente (normalmente 9000)
API_TOKEN                 Token de autenticaci√≥n (debe coincidir)
SESSION_TIMEOUT_MINUTES   Timeout de sesiones (15 por defecto)

================================================================================
COMANDOS √öTILES:
================================================================================

docker-compose ps              Ver estado del contenedor
docker-compose logs            Ver todos los logs
docker-compose logs -f         Ver logs en tiempo real
docker-compose logs --tail=50  Ver √∫ltimas 50 l√≠neas
docker-compose restart         Reiniciar contenedor
docker-compose down            Detener y eliminar contenedor
docker-compose build           Reconstruir imagen
docker-compose up -d           Iniciar en background
docker exec -it whatsapp-tickets-server bash    Entrar al contenedor

================================================================================
ESTRUCTURA DE ARCHIVOS:
================================================================================

.
‚îú‚îÄ‚îÄ Dockerfile                    # Configuraci√≥n de Docker
‚îú‚îÄ‚îÄ docker-compose.yml            # Configuraci√≥n de Docker Compose
‚îú‚îÄ‚îÄ docker-compose.example.yml    # Ejemplo comentado
‚îú‚îÄ‚îÄ .dockerignore                 # Archivos a ignorar en build
‚îú‚îÄ‚îÄ main.py                       # Backend principal
‚îú‚îÄ‚îÄ index.html                    # Frontend/Dashboard
‚îú‚îÄ‚îÄ requirements.txt              # Dependencias Python
‚îú‚îÄ‚îÄ .env                          # Variables de entorno
‚îú‚îÄ‚îÄ DOCKER.md                     # Documentaci√≥n Docker
‚îú‚îÄ‚îÄ DEPLOYMENT.md                 # Gu√≠a r√°pida
‚îú‚îÄ‚îÄ SETUP-DOCKER.txt              # Este archivo
‚îú‚îÄ‚îÄ start-docker.bat              # Script inicio (Windows)
‚îú‚îÄ‚îÄ stop-docker.bat               # Script parada (Windows)
‚îú‚îÄ‚îÄ start-docker.sh               # Script inicio (Linux/Mac)
‚îú‚îÄ‚îÄ stop-docker.sh                # Script parada (Linux/Mac)
‚îÇ
‚îú‚îÄ‚îÄ fotos_evidencia/              # Carpeta para fotos (creada en runtime)
‚îú‚îÄ‚îÄ logs_conversaciones/          # Carpeta para logs (creada en runtime)
‚îú‚îÄ‚îÄ tickets.db                    # BD SQLite (creada en runtime)
‚îÇ
‚îî‚îÄ‚îÄ node_modules/                 # Dependencias del puente (no incluidas)

================================================================================
TROUBLESHOOTING:
================================================================================

‚ùå "Port 8523 already in use"
   ‚Üí Cambiar puerto en docker-compose.yml o:
   ‚Üí docker ps  (para ver qu√© usa el puerto)
   ‚Üí docker stop [container-id]

‚ùå "DEEPSEEK_API_KEY is empty"
   ‚Üí Verificar que API Key est√© correctamente configurada
   ‚Üí Restart: docker-compose restart

‚ùå "Cannot connect to whatsapp-bridge"
   ‚Üí Verificar IP_LAPTOP y PUERTO_LAPTOP
   ‚Üí Verificar que API_TOKEN coincida
   ‚Üí Ver logs: docker-compose logs

‚ùå "No such file or directory: main.py"
   ‚Üí Verificar que est√©s en el directorio correcto
   ‚Üí ls  (debe mostrar main.py, docker-compose.yml, etc)

================================================================================
PR√ìXIMOS PASOS:
================================================================================

1. ‚úÖ Instalar Docker
2. ‚úÖ Configurar docker-compose.yml con tu API Key
3. ‚úÖ Ejecutar: docker-compose up -d
4. ‚úÖ Verificar: curl http://localhost:8523/health
5. ‚úÖ Acceder: http://localhost:8523/
6. ‚úÖ Enviar mensaje de prueba por WhatsApp

¬°Sistema listo para producci√≥n! üöÄ

================================================================================
